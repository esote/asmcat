TODO:
	Fix incorrect return value in some cases
